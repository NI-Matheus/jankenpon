<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Jankenpon</title>
  </head>

  <style>
    html {
      font-family: sans-serif;
    }
    body {
      width: 50%;
      max-width: 800px;
      min-width: 480px;
      margin: 0 auto;
    }
  </style>

  <body>
    <h1>Rock Paper Scissors game</h1>
    <p>Let's see if you can beat me. Click let's play and enter your choice</p>


    <button onclick="game()" id="submit">Let's play!</button>

    <div class="resultParas">
      <ul id="game-results"></ul>
      <p id="final-result"></p>
    </div>
  </body>
  <script>
    function game() {
      let playerScore = 0;
      let computerScore = 0;
      let tieScore = 0;
      const gameResultsList = document.querySelector("#game-results");
      const finalResultPara = document.querySelector("#final-result");
      // Clear previous game results
      gameResultsList.innerHTML = "";
      finalResultPara.innerHTML = "";

      for (let roundCounter = 0; roundCounter < 5; roundCounter++ ) {
        const playerSelection = prompt("Let's play! Rock, Paper or Scissors?").toLowerCase();
        const computerSelection = getComputerChoice();
        const roundResult = playRound(playerSelection, computerSelection);

        updateGameResults(gameResultsList, roundCounter, playerSelection, computerSelection, roundResult);

        if (roundResult.startsWith("You Win!")) {
          playerScore++;
        } else if (roundResult.startsWith("You Lose!")) {
          computerScore++;
        } else if (roundResult.startsWith("It's a Draw!")) {
          tieScore++;
        } else if (roundResult.startsWith("Your input")){
          roundCounter--;
        }
      }

      if (playerScore > computerScore) {
        finalResultPara.innerHTML = `You won the game! Final score: You (${playerScore}) - Computer (${computerScore})`;
        console.log(finalResultPara);
      } else if (computerScore > playerScore) {
        finalResultPara.innerHTML = `You lost the game! Final score: You (${playerScore}) - Computer (${computerScore})`;
        console.log(finalResultPara);
      } else {
        finalResultPara.innerHTML = `It's a tie! Final score: You (${playerScore}) - Computer (${computerScore})`;
        console.log(finalResultPara);
      }
    }

    function playRound(playerSelection, computerSelection) {
      playerSelection =
        playerSelection.charAt(0).toUpperCase() + playerSelection.slice(1);

      if (playerSelection === computerSelection) {
        return `It's a Draw! ${playerSelection} vs ${computerSelection}`;
      } else {
        switch (playerSelection) {
          case "Rock":
            if (computerSelection === "Scissors") {
              return `You Win! ${playerSelection} beats ${computerSelection}`;
            } else {
              return `You Lose! ${computerSelection} beats ${playerSelection}`;
            }
            break;

          case "Paper":
            if (computerSelection === "Rock") {
              return `You Win! ${playerSelection} beats ${computerSelection}`;
            } else {
              return `You Lose! ${computerSelection} beats ${playerSelection}`;
            }
            break;

          case "Scissors":
            if (computerSelection === "Paper") {
              return `You Win! ${playerSelection} beats ${computerSelection}`;
            } else {
              return `You Lose! ${computerSelection} beats ${playerSelection}`;
            }
            break;

          default:
            return `Your input '${playerSelection}' is not a option, write 'rock', 'paper' or 'scissors'`;
            break;
        }
      }
    }

    function getComputerChoice() {
          let randomNumber = Math.floor(Math.random() * 3); //Return [0,1,2]
          if (randomNumber === 0) {
            return "Rock";
          } else if (randomNumber === 1) {
            return "Paper";
          } else {
            return "Scissors";
          }
        }

        function updateGameResults(gameResultsList, roundNumber, playerSelection, computerSelection, roundResult) {
          // Create new list item for the current round result
          const listItem = document.createElement("li");
          listItem.innerText = `Round(${roundNumber}): ${playerSelection} vs ${computerSelection} : ${roundResult}`;

          // Add the new list item to the game results list
          gameResultsList.appendChild(listItem);
}
  </script>
</html>
